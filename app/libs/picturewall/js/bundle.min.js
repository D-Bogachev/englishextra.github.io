(function(h){h.console||(h.console={});h=h.console;for(var e,d=function(){},c=["memory"],a="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");e=c.pop();)h[e]||(h[e]={});for(;e=a.pop();)h[e]||(h[e]=d);e=e=d=c=a=null})("undefined"!==typeof window?window:this);
(function(h,e){var d={create:function(c,a,b,g){var f=this;f.dataAttributeHighresName=b||"highres";f.dataAttributeLowresName=g||"lowres";d.resize(c.children);c.classList.remove("loading");c.addEventListener("click",function(){f.children&&0<f.children.length&&d.shrink(f.children[0])});for(b=0;b<c.children.length;b++)c.children[b].addEventListener("click",d.animate);a&&d.keys(c)},keys:function(c){var a=function(a){if(!a.defaultPrevented){var g=c||e.getElementsByClassName("zoomwall lightbox")[0];if(g)switch(a.keyCode){case 27:g.children&&
0<g.children.length&&d.shrink(g.children[0]);a.preventDefault();break;case 37:d.page(g,!1);a.preventDefault();break;case 39:d.page(g,!0),a.preventDefault()}}};e.addEventListener("keydown",a);return a},resizeRow:function(c,a){if(c&&1<c.length)for(var b in c)c.hasOwnProperty(b)&&(c[b].style.width=parseInt(h.getComputedStyle(c[b]).width,10)/a*100+"%",c[b].style.height="auto")},calcRowWidth:function(c){var a=0,b;for(b in c)c.hasOwnProperty(b)&&(a+=parseInt(h.getComputedStyle(c[b]).width,10));return a},
resize:function(c){for(var a=[],b=-1,g=0;g<c.length;g++){var f=c[g];f&&(-1==b?b=f.offsetTop:f.offsetTop!=b&&(d.resizeRow(a,d.calcRowWidth(a)),a=[],b=f.offsetTop),a.push(f))}d.resizeRow(a,d.calcRowWidth(a))},reset:function(c){c.style.transform="translate(0, 0) scale(1)";c.style.webkitTransform="translate(0, 0) scale(1)";c.classList.remove("active")},shrink:function(c){c.parentNode.classList.remove("lightbox");d.reset(c);for(var a=c.previousElementSibling;a;)d.reset(a),a=a.previousElementSibling;for(a=
c.nextElementSibling;a;)d.reset(a),a=a.nextElementSibling;c.dataset.lowres&&(c.src=c.dataset.lowres)},expand:function(c){c.classList.add("active");c.parentNode.classList.add("lightbox");var a=h.getComputedStyle(c.parentNode),b=parseInt(a.width,10),g=parseInt(a.height,10),f=c.parentNode.getBoundingClientRect().top,a=h.getComputedStyle(c),l=parseInt(a.width,10),e=parseInt(a.height,10),d=h.innerHeight;g<h.innerHeight?d=g:0<f&&(d-=f);c.dataset[this.dataAttributeHighresName]&&(c.src!=c.dataset[this.dataAttributeHighresName]&&
void 0===c.dataset[this.dataAttributeLowresName]&&(c.dataset[this.dataAttributeLowresName]=c.src),c.src=c.dataset[this.dataAttributeHighresName]);var k=[];k.push(c);for(a=c.nextElementSibling;a&&a.offsetTop==c.offsetTop;)k.push(a),a=a.nextElementSibling;for(a=c.previousElementSibling;a&&a.offsetTop==c.offsetTop;)k.unshift(a),a=a.previousElementSibling;a=d/e;l*a>b&&(a=b/l);var m=f-c.parentNode.offsetTop+c.offsetTop;if(g<h.innerHeight||e*a<g)m-=d/2-e*a/2;0<f&&(m-=f);for(g=f=0;g<k.length&&k[g]!=c;g++)f+=
parseInt(h.getComputedStyle(k[g]).width,10)*a;f=b/2-l*a/2-f;g=0;for(d=k.length-1;0<=d&&k[d]!=c;d--)g+=parseInt(h.getComputedStyle(k[d]).width,10)*a;g=b/2-l*a/2-g;for(l=b=c=0;l<k.length;l++){c+=b*a-b;var b=parseInt(h.getComputedStyle(k[l]).width,10),d=(c+f)/b*100,n=-m/parseInt(h.getComputedStyle(k[l]).height,10)*100;k[l].style.transformOrigin="0% 0%";k[l].style.webkitTransformOrigin="0% 0%";k[l].style.transform="translate("+d.toFixed(8)+"%, "+n.toFixed(8)+"%) scale("+a.toFixed(8)+")";k[l].style.webkitTransform=
"translate("+d.toFixed(8)+"%, "+n.toFixed(8)+"%) scale("+a.toFixed(8)+")"}for(var e=e*(a-1)-m,p,b=c=0,l=k[k.length-1].nextElementSibling,d=-1;l;){n=l.offsetTop;n==d?c+=b*a-b:(-1!=d&&(c=0,e+=p*(a-1)),d=n);b=parseInt(h.getComputedStyle(l).width,10);p=parseInt(h.getComputedStyle(l).height,10);var n=(c+f)/b*100,t=e/p*100;l.style.transformOrigin="0% 0%";l.style.webkitTransformOrigin="0% 0%";l.style.transform="translate("+n.toFixed(8)+"%, "+t.toFixed(8)+"%) scale("+a.toFixed(8)+")";l.style.webkitTransform=
"translate("+n.toFixed(8)+"%, "+t.toFixed(8)+"%) scale("+a.toFixed(8)+")";l=l.nextElementSibling}p=-m;b=c=0;k=k[0].previousElementSibling;for(m=-1;k;)f=k.offsetTop,f==m?c-=b*a-b:(c=0,p-=parseInt(h.getComputedStyle(k).height,10)*(a-1),m=f),b=parseInt(h.getComputedStyle(k).width,10),f=(c-g)/b*100,e=p/parseInt(h.getComputedStyle(k).height,10)*100,k.style.transformOrigin="100% 0%",k.style.webkitTransformOrigin="100% 0%",k.style.transform="translate("+f.toFixed(8)+"%, "+e.toFixed(8)+"%) scale("+a.toFixed(8)+
")",k.style.webkitTransform="translate("+f.toFixed(8)+"%, "+e.toFixed(8)+"%) scale("+a.toFixed(8)+")",k=k.previousElementSibling},animate:function(c){if(this.classList.contains("active"))d.shrink(this);else{for(var a=this.parentNode.getElementsByClassName("active"),b=0;b<a.length;b++)a[b].classList.remove("active");d.expand(this)}c.stopPropagation()},page:function(c,a){var b=c.getElementsByClassName("active");if(b&&0<b.length){var b=b[0],g;if(g=a?b.nextElementSibling:b.previousElementSibling)b.classList.remove("active"),
b.dataset.lowres&&(b.src=b.dataset.lowres),d.expand(g)}}};h.zoomwall=d})("undefined"!==typeof window?window:this,document);
(function(h,e){h.echo=function(d,c,a){d=d||"data-src-img";c=c||"src";a=a||100;var b=function(a){this.elem=a;this.render();this.listen()},g=e.documentElement.classList.contains("is-binded-echo")||"",f=[],l=function(){for(var a=0;a<f.length;a++){var b=f[a],g=b.getBoundingClientRect();if((0<=g.top&&0<=g.left&&g.top)<=(h.innerHeight||e.documentElement.clientHeight)){var g=b,d=a;-1!==f.indexOf(b)&&f.splice(d,1);g.src=g.dataset[c]||g.getAttribute("data-"+c)}}},q=function(a,c){function b(){e=0;l=+new Date;
d=a.apply(g,f);f=g=null}var g,f,d,e,l=0;return function(){g=this;f=arguments;var a=new Date-l;e||(a>=c?b():e=setTimeout(b,c-a));return d}}(l,a),r=function(){var a=!1;try{var c=Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){a=!0}});h.addEventListener("test",function(){},c)}catch(b){}return a}();b.prototype={init:function(){f.push(this.elem)},render:function(){l()},listen:function(){g||(h.addEventListener("scroll",q,r?{passive:!0}:!1),e.documentElement.classList.add("is-binded-echo"))}};
var k=e.getElementsByClassName(d)||"";k&&function(){for(var a=0;a<k.length;a++)(new b(k[a])).init()}()}})("undefined"!==typeof window?window:this,document);(function(h,e){h.doesFontExist=function(d){var c=e.createElement("canvas").getContext("2d");c.font="72px monospace";var a=c.measureText("abcdefghijklmnopqrstuvwxyz0123456789").width;c.font="72px '"+d+"', monospace";return c.measureText("abcdefghijklmnopqrstuvwxyz0123456789").width==a?!1:!0}})("undefined"!==typeof window?window:this,document);
(function(h,e){h.loadJsCss=function(d,c){var a=this;a.files=d;a.js=[];a.head=e.getElementsByTagName("head")[0]||"";a.body=e.body||"";a.ref=e.getElementsByTagName("script")[0]||"";a.callback=c||function(){};a.loadStyle=function(c){var b=e.createElement("link");b.rel="stylesheet";b.type="text/css";b.href=c;a.head.appendChild(b)};a.loadScript=function(c){var b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src=a.js[c];b.onload=function(){++c<a.js.length?a.loadScript(c):a.callback()};
a.head.appendChild(b);a.ref.parentNode?a.ref.parentNode.insertBefore(b,a.ref):(a.body||a.head).appendChild(b)};var b,g;b=0;for(g=a.files.length;b<g;b+=1)/\.js$|\.js\?/.test(a.files[b])&&a.js.push(a.files[b]),/\.css$|\.css\?|\/css\?/.test(a.files[b])&&a.loadStyle(a.files[b]);b=g=null;0<a.js.length?a.loadScript(0):a.callback()}})("undefined"!==typeof window?window:this,document);
(function(h,e){var d=function(){var a=e.getElementById("zoomwall")||"",b=new Headers;fetch("./libs/picturewall/json/zoomwall.json",{headers:b,credentials:"same-origin"}).then(function(a){if(a.ok)return a.text();throw Error("cannot fetch","./libs/picturewall/json/zoomwall.json");}).then(function(c){(new Promise(function(b,d){var f;try{f=JSON.parse(c);if(!f[0].highres)throw Error("incomplete JSON data: no highres");if(!f[0].src)throw Error("incomplete JSON data: no src");}catch(h){console.log("cannot init generateGallery",
h);return}var k=e.createDocumentFragment(),l;for(l in f)if(f.hasOwnProperty(l)&&f[l].src&&f[l].highres){var m=e.createElement("img");/^([0-9]+)(\x|\ )([0-9]+)$/.test(f[l].src)?m.src=["data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20viewBox%3D%270%200%20",f[l].src.replace("x","%20"),"%27%2F%3E"].join(""):m.src=f[l].src;m.dataset.highres=f[l].highres;m.classList.add("data-src-img");k.appendChild(m);k.appendChild(e.createTextNode("\n"))}a.appendChild(k)?
b():d()})).then(function(a){return a}).then(function(c){var b;b=setTimeout(function(){clearTimeout(b);b=null;a&&zoomwall.create(a,!0,"highres")},200)}).then(function(a){var b;b=setTimeout(function(){clearTimeout(b);b=null;echo("data-src-img","highres")},200)})["catch"](function(a){console.log("Cannot create zoomwall gallery",a)})})["catch"](function(a){console.log("cannot parse","./libs/picturewall/json/zoomwall.json")});var b="ontouchstart"in e[c]||"",d="onwheel"in e.createElement("div")||void 0!==
e.onmousewheel||"",q=e.title||"",r=navigator.userAgent||"",k=function(){var a=new Date,b=a.getDate(),c=a.getFullYear(),a=a.getMonth(),a=a+1;10>b&&(b="0"+b);10>a&&(a="0"+a);return c+"-"+a+"-"+b}(),m="";r&&h.platform&&(m=platform.description||"",e.title=q+" ["+(k?" "+k:"")+(m?" "+m:"")+(b||d?" with":"")+(b?" touch":"")+(b&&d?",":"")+(d?" mousewheel":"")+"]")},c="documentElement",a=["./libs/picturewall/css/bundle.min.css"],b=function(a){var b=h.location.protocol||"";return"http:"===b?"http":"https:"===
b?"https":a?"http":""}(!0);"classList"in e.createElement("_")||a.push(b+"://cdn.jsdelivr.net/npm/classlist.js@1.1.20150312/classList.min.js");"undefined"!==typeof h.Element&&"dataset"in e[c]||a.push(b+"://cdn.jsdelivr.net/npm/element-dataset@2.2.6/lib/browser/index.cjs.min.js");(function(){var a=!1;try{var b=Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){a=!0}});h.addEventListener("test",function(){},b)}catch(c){}return a})()||a.push(b+"://cdnjs.cloudflare.com/ajax/libs/dom4/1.8.3/dom4.js");
h.Promise||a.push(b+"://cdn.jsdelivr.net/es6-promise-polyfill/1.2.0/promise.min.js");h.fetch||a.push(b+"://cdn.jsdelivr.net/fetch/2.0.1/fetch.min.js");a.push(b+"://cdn.jsdelivr.net/npm/platform@1.3.4/platform.min.js");new loadJsCss([b+"://fonts.googleapis.com/css?family=Roboto:400&subset=cyrillic"],function(){var b,c=function(){clearInterval(b);b=null;new loadJsCss(a,d)},h=function(){doesFontExist("Roboto")&&c()};(function(){var a=e.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))})()?
b=setInterval(h,100):(b=null,c())})})("undefined"!==typeof window?window:this,document);
//# sourceMappingURL=bundle.min.js.map
