(function(l){l.console||(l.console={});l=l.console;for(var h,e=function(){},b=["memory"],a="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");h=b.pop();)l[h]||(l[h]={});for(;h=a.pop();)l[h]||(l[h]=e);h=h=e=b=a=null})("undefined"!==typeof window?window:this);
(function(l,h){var e={create:function(b,a,c,f){var g=this;g.dataAttributeHighresName=c||"highres";g.dataAttributeLowresName=f||"lowres";e.resize(b.children);b.classList.remove("loading");b.addEventListener("click",function(){g.children&&0<g.children.length&&e.shrink(g.children[0])});for(c=0;c<b.children.length;c++)b.children[c].addEventListener("click",e.animate);a&&e.keys(b)},keys:function(b){var a=function(a){if(!a.defaultPrevented){var f=b||h.getElementsByClassName("zoomwall lightbox")[0];if(f)switch(a.keyCode){case 27:f.children&&
0<f.children.length&&e.shrink(f.children[0]);a.preventDefault();break;case 37:e.page(f,!1);a.preventDefault();break;case 39:e.page(f,!0),a.preventDefault()}}};h.addEventListener("keydown",a);return a},resizeRow:function(b,a){if(b&&1<b.length)for(var c in b)b.hasOwnProperty(c)&&(b[c].style.width=parseInt(window.getComputedStyle(b[c]).width,10)/a*100+"%",b[c].style.height="auto")},calcRowWidth:function(b){var a=0,c;for(c in b)b.hasOwnProperty(c)&&(a+=parseInt(window.getComputedStyle(b[c]).width,10));
return a},resize:function(b){for(var a=[],c=-1,f=0;f<b.length;f++){var g=b[f];g&&(-1==c?c=g.offsetTop:g.offsetTop!=c&&(e.resizeRow(a,e.calcRowWidth(a)),a=[],c=g.offsetTop),a.push(g))}e.resizeRow(a,e.calcRowWidth(a))},reset:function(b){b.style.transform="translate(0, 0) scale(1)";b.style.webkitTransform="translate(0, 0) scale(1)";b.classList.remove("active")},shrink:function(b){b.parentNode.classList.remove("lightbox");e.reset(b);for(var a=b.previousElementSibling;a;)e.reset(a),a=a.previousElementSibling;
for(a=b.nextElementSibling;a;)e.reset(a),a=a.nextElementSibling;b.dataset.lowres&&(b.src=b.dataset.lowres)},expand:function(b){b.classList.add("active");b.parentNode.classList.add("lightbox");var a=window.getComputedStyle(b.parentNode),c=parseInt(a.width,10),f=parseInt(a.height,10),g=b.parentNode.getBoundingClientRect().top,a=window.getComputedStyle(b),d=parseInt(a.width,10),e=parseInt(a.height,10),m=window.innerHeight;f<window.innerHeight?m=f:0<g&&(m-=g);b.dataset[this.dataAttributeHighresName]&&
(b.src!=b.dataset[this.dataAttributeHighresName]&&void 0===b.dataset[this.dataAttributeLowresName]&&(b.dataset[this.dataAttributeLowresName]=b.src),b.src=b.dataset[this.dataAttributeHighresName]);var k=[];k.push(b);for(a=b.nextElementSibling;a&&a.offsetTop==b.offsetTop;)k.push(a),a=a.nextElementSibling;for(a=b.previousElementSibling;a&&a.offsetTop==b.offsetTop;)k.unshift(a),a=a.previousElementSibling;a=m/e;d*a>c&&(a=c/d);var h=g-b.parentNode.offsetTop+b.offsetTop;if(f<window.innerHeight||e*a<f)h-=
m/2-e*a/2;0<g&&(h-=g);for(f=g=0;f<k.length&&k[f]!=b;f++)g+=parseInt(window.getComputedStyle(k[f]).width,10)*a;g=c/2-d*a/2-g;f=0;for(m=k.length-1;0<=m&&k[m]!=b;m--)f+=parseInt(window.getComputedStyle(k[m]).width,10)*a;f=c/2-d*a/2-f;for(d=c=b=0;d<k.length;d++){b+=c*a-c;var c=parseInt(window.getComputedStyle(k[d]).width,10),m=(b+g)/c*100,n=-h/parseInt(window.getComputedStyle(k[d]).height,10)*100;k[d].style.transformOrigin="0% 0%";k[d].style.webkitTransformOrigin="0% 0%";k[d].style.transform="translate("+
m.toFixed(8)+"%, "+n.toFixed(8)+"%) scale("+a.toFixed(8)+")";k[d].style.webkitTransform="translate("+m.toFixed(8)+"%, "+n.toFixed(8)+"%) scale("+a.toFixed(8)+")"}for(var e=e*(a-1)-h,l,c=b=0,d=k[k.length-1].nextElementSibling,m=-1;d;){n=d.offsetTop;n==m?b+=c*a-c:(-1!=m&&(b=0,e+=l*(a-1)),m=n);c=parseInt(window.getComputedStyle(d).width,10);l=parseInt(window.getComputedStyle(d).height,10);var n=(b+g)/c*100,p=e/l*100;d.style.transformOrigin="0% 0%";d.style.webkitTransformOrigin="0% 0%";d.style.transform=
"translate("+n.toFixed(8)+"%, "+p.toFixed(8)+"%) scale("+a.toFixed(8)+")";d.style.webkitTransform="translate("+n.toFixed(8)+"%, "+p.toFixed(8)+"%) scale("+a.toFixed(8)+")";d=d.nextElementSibling}l=-h;c=b=0;k=k[0].previousElementSibling;for(h=-1;k;)g=k.offsetTop,g==h?b-=c*a-c:(b=0,l-=parseInt(window.getComputedStyle(k).height,10)*(a-1),h=g),c=parseInt(window.getComputedStyle(k).width,10),g=(b-f)/c*100,e=l/parseInt(window.getComputedStyle(k).height,10)*100,k.style.transformOrigin="100% 0%",k.style.webkitTransformOrigin=
"100% 0%",k.style.transform="translate("+g.toFixed(8)+"%, "+e.toFixed(8)+"%) scale("+a.toFixed(8)+")",k.style.webkitTransform="translate("+g.toFixed(8)+"%, "+e.toFixed(8)+"%) scale("+a.toFixed(8)+")",k=k.previousElementSibling},animate:function(b){if(this.classList.contains("active"))e.shrink(this);else{for(var a=this.parentNode.getElementsByClassName("active"),c=0;c<a.length;c++)a[c].classList.remove("active");e.expand(this)}b.stopPropagation()},page:function(b,a){var c=b.getElementsByClassName("active");
if(c&&0<c.length){var c=c[0],f;if(f=a?c.nextElementSibling:c.previousElementSibling)c.classList.remove("active"),c.dataset.lowres&&(c.src=c.dataset.lowres),e.expand(f)}}};l.zoomwall=e})("undefined"!==typeof window?window:this,document);
(function(l,h){l.echo=function(e,b,a){e=e||"data-src-img";b=b||"src";a=a||100;var c=function(a){this.elem=a;this.render();this.listen()},f=h.documentElement.classList.contains("is-binded-echo")||"",g=[],d=function(){for(var a=0;a<g.length;a++){var c=g[a],d=c.getBoundingClientRect();if((0<=d.top&&0<=d.left&&d.top)<=(window.innerHeight||h.documentElement.clientHeight)){var d=c,f=a;-1!==g.indexOf(c)&&g.splice(f,1);d.src=d.dataset[b]||d.getAttribute("data-"+b)}}},q=function(a,b){function c(){e=0;h=+new Date;
f=a.apply(d,g);g=d=null}var d,g,f,e,h=0;return function(){d=this;g=arguments;var a=new Date-h;e||(a>=b?c():e=setTimeout(c,b-a));return f}}(d,a);c.prototype={init:function(){g.push(this.elem)},render:function(){d()},listen:function(){f||(l.addEventListener("scroll",q),h.documentElement.classList.add("is-binded-echo"))}};var m=h.getElementsByClassName(e)||"";m&&function(){for(var a=0;a<m.length;a++)(new c(m[a])).init()}()}})("undefined"!==typeof window?window:this,document);
(function(l,h){l.loadJsCss=function(e,b){var a=this;a.files=e;a.js=[];a.head=h.getElementsByTagName("head")[0]||"";a.body=h.body||"";a.ref=h.getElementsByTagName("script")[0]||"";a.callback=b||function(){};a.loadStyle=function(b){var c=h.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=b;a.head.appendChild(c)};a.loadScript=function(b){var c=h.createElement("script");c.type="text/javascript";c.async=!0;c.src=a.js[b];c.onload=function(){++b<a.js.length?a.loadScript(b):a.callback()};
a.head.appendChild(c);a.ref.parentNode?a.ref.parentNode.insertBefore(c,a.ref):(a.body||a.head).appendChild(c)};var c,f;c=0;for(f=a.files.length;c<f;c+=1)/\.js$|\.js\?/.test(a.files[c])&&a.js.push(a.files[c]),/\.css$|\.css\?|\/css\?/.test(a.files[c])&&a.loadStyle(a.files[c]);c=f=null;0<a.js.length?a.loadScript(0):a.callback()}})("undefined"!==typeof window?window:this,document);
(function(l,h){var e=["./libs/picturewall/css/bundle.min.css"];l.Promise||e.push("//cdn.jsdelivr.net/es6-promise-polyfill/1.2.0/promise.min.js");l.fetch||e.push("//cdn.jsdelivr.net/fetch/2.0.1/fetch.min.js");new loadJsCss(e,function(){var b=h.getElementById("zoomwall")||"",a=new Headers;fetch("./libs/picturewall/json/zoomwall.json",{headers:a,credentials:"same-origin"}).then(function(a){if(a.ok)return a.text();throw Error("cannot fetch","./libs/picturewall/json/zoomwall.json");}).then(function(a){(new Promise(function(f,
g){var d;try{d=JSON.parse(a);if(!d[0].highres)throw Error("incomplete JSON data: no highres");if(!d[0].src)throw Error("incomplete JSON data: no src");}catch(e){console.log("cannot init generateGallery",e);return}var l=h.createDocumentFragment(),m;for(m in d)if(d.hasOwnProperty(m)&&d[m].src&&d[m].highres){var k=h.createElement("img");/^([0-9]+)(\x|\ )([0-9]+)$/.test(d[m].src)?k.src=["data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20viewBox%3D%270%200%20",
d[m].src.replace("x","%20"),"%27%2F%3E"].join(""):k.src=d[m].src;k.dataset.highres=d[m].highres;k.classList.add("data-src-img");l.appendChild(k);l.appendChild(h.createTextNode("\n"))}b.appendChild(l)?f():g()})).then(function(a){return a}).then(function(a){var c=setTimeout(function(){clearTimeout(c);c=null;b&&zoomwall.create(b,!0,"highres")},200)}).then(function(a){var b=setTimeout(function(){clearTimeout(b);b=null;echo("data-src-img","highres")},200)})["catch"](function(a){console.log("Cannot create zoomwall gallery",
a)})})["catch"](function(a){console.log("cannot parse","./libs/picturewall/json/zoomwall.json")})})})("undefined"!==typeof window?window:this,document);
//# sourceMappingURL=bundle.min.js.map
