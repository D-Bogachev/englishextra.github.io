(function(l){l.console||(l.console={});l=l.console;for(var h,e=function(){},b=["memory"],a="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");h=b.pop();)l[h]||(l[h]={});for(;h=a.pop();)l[h]||(l[h]=e);h=h=e=b=a=null})("undefined"!==typeof window?window:this);
(function(l,h){var e={create:function(b,a,c,f){var k=this;k.dataAttributeHighresName=c||"highres";k.dataAttributeLowresName=f||"lowres";e.resize(b.children);b.classList.remove("loading");b.addEventListener("click",function(){k.children&&0<k.children.length&&e.shrink(k.children[0])});for(c=0;c<b.children.length;c++)b.children[c].addEventListener("click",e.animate);a&&e.keys(b)},keys:function(b){var a=function(a){if(!a.defaultPrevented){var f=b||h.getElementsByClassName("zoomwall lightbox")[0];if(f)switch(a.keyCode){case 27:f.children&&
0<f.children.length&&e.shrink(f.children[0]);a.preventDefault();break;case 37:e.page(f,!1);a.preventDefault();break;case 39:e.page(f,!0),a.preventDefault()}}};h.addEventListener("keydown",a);return a},resizeRow:function(b,a){if(b&&1<b.length)for(var c in b)b.hasOwnProperty(c)&&(b[c].style.width=parseInt(window.getComputedStyle(b[c]).width,10)/a*100+"%",b[c].style.height="auto")},calcRowWidth:function(b){var a=0,c;for(c in b)b.hasOwnProperty(c)&&(a+=parseInt(window.getComputedStyle(b[c]).width,10));
return a},resize:function(b){for(var a=[],c=-1,f=0;f<b.length;f++){var k=b[f];k&&(-1==c?c=k.offsetTop:k.offsetTop!=c&&(e.resizeRow(a,e.calcRowWidth(a)),a=[],c=k.offsetTop),a.push(k))}e.resizeRow(a,e.calcRowWidth(a))},reset:function(b){b.style.transform="translate(0, 0) scale(1)";b.style.webkitTransform="translate(0, 0) scale(1)";b.classList.remove("active")},shrink:function(b){b.parentNode.classList.remove("lightbox");e.reset(b);for(var a=b.previousElementSibling;a;)e.reset(a),a=a.previousElementSibling;
for(a=b.nextElementSibling;a;)e.reset(a),a=a.nextElementSibling;b.dataset.lowres&&(b.src=b.dataset.lowres)},expand:function(b){b.classList.add("active");b.parentNode.classList.add("lightbox");var a=window.getComputedStyle(b.parentNode),c=parseInt(a.width,10),f=parseInt(a.height,10),k=b.parentNode.getBoundingClientRect().top,a=window.getComputedStyle(b),d=parseInt(a.width,10),e=parseInt(a.height,10),m=window.innerHeight;f<window.innerHeight?m=f:0<k&&(m-=k);b.dataset[this.dataAttributeHighresName]&&
(b.src!=b.dataset[this.dataAttributeHighresName]&&void 0===b.dataset[this.dataAttributeLowresName]&&(b.dataset[this.dataAttributeLowresName]=b.src),b.src=b.dataset[this.dataAttributeHighresName]);var g=[];g.push(b);for(a=b.nextElementSibling;a&&a.offsetTop==b.offsetTop;)g.push(a),a=a.nextElementSibling;for(a=b.previousElementSibling;a&&a.offsetTop==b.offsetTop;)g.unshift(a),a=a.previousElementSibling;a=m/e;d*a>c&&(a=c/d);var h=k-b.parentNode.offsetTop+b.offsetTop;if(f<window.innerHeight||e*a<f)h-=
m/2-e*a/2;0<k&&(h-=k);for(f=k=0;f<g.length&&g[f]!=b;f++)k+=parseInt(window.getComputedStyle(g[f]).width,10)*a;k=c/2-d*a/2-k;f=0;for(m=g.length-1;0<=m&&g[m]!=b;m--)f+=parseInt(window.getComputedStyle(g[m]).width,10)*a;f=c/2-d*a/2-f;for(d=c=b=0;d<g.length;d++){b+=c*a-c;var c=parseInt(window.getComputedStyle(g[d]).width,10),m=(b+k)/c*100,l=-h/parseInt(window.getComputedStyle(g[d]).height,10)*100;g[d].style.transformOrigin="0% 0%";g[d].style.webkitTransformOrigin="0% 0%";g[d].style.transform="translate("+
m.toFixed(8)+"%, "+l.toFixed(8)+"%) scale("+a.toFixed(8)+")";g[d].style.webkitTransform="translate("+m.toFixed(8)+"%, "+l.toFixed(8)+"%) scale("+a.toFixed(8)+")"}for(var e=e*(a-1)-h,n,c=b=0,d=g[g.length-1].nextElementSibling,m=-1;d;){l=d.offsetTop;l==m?b+=c*a-c:(-1!=m&&(b=0,e+=n*(a-1)),m=l);c=parseInt(window.getComputedStyle(d).width,10);n=parseInt(window.getComputedStyle(d).height,10);var l=(b+k)/c*100,q=e/n*100;d.style.transformOrigin="0% 0%";d.style.webkitTransformOrigin="0% 0%";d.style.transform=
"translate("+l.toFixed(8)+"%, "+q.toFixed(8)+"%) scale("+a.toFixed(8)+")";d.style.webkitTransform="translate("+l.toFixed(8)+"%, "+q.toFixed(8)+"%) scale("+a.toFixed(8)+")";d=d.nextElementSibling}n=-h;c=b=0;g=g[0].previousElementSibling;for(h=-1;g;)k=g.offsetTop,k==h?b-=c*a-c:(b=0,n-=parseInt(window.getComputedStyle(g).height,10)*(a-1),h=k),c=parseInt(window.getComputedStyle(g).width,10),k=(b-f)/c*100,e=n/parseInt(window.getComputedStyle(g).height,10)*100,g.style.transformOrigin="100% 0%",g.style.webkitTransformOrigin=
"100% 0%",g.style.transform="translate("+k.toFixed(8)+"%, "+e.toFixed(8)+"%) scale("+a.toFixed(8)+")",g.style.webkitTransform="translate("+k.toFixed(8)+"%, "+e.toFixed(8)+"%) scale("+a.toFixed(8)+")",g=g.previousElementSibling},animate:function(b){if(this.classList.contains("active"))e.shrink(this);else{for(var a=this.parentNode.getElementsByClassName("active"),c=0;c<a.length;c++)a[c].classList.remove("active");e.expand(this)}b.stopPropagation()},page:function(b,a){var c=b.getElementsByClassName("active");
if(c&&0<c.length){var c=c[0],f;if(f=a?c.nextElementSibling:c.previousElementSibling)c.classList.remove("active"),c.dataset.lowres&&(c.src=c.dataset.lowres),e.expand(f)}}};l.zoomwall=e})("undefined"!==typeof window?window:this,document);
(function(l,h){l.echo=function(e,b){e=e||"data-src-img";b=b||"src";var a=function(a){this.elem=a;this.render();this.listen()},c=h.documentElement.classList.contains("is-binded-echo")||"",f=[],k=function(){for(var a=0;a<f.length;a++){var c=f[a],d=c.getBoundingClientRect();if((0<=d.top&&0<=d.left&&d.top)<=(window.innerHeight||h.documentElement.clientHeight)){var d=c,k=a;-1!==f.indexOf(c)&&f.splice(k,1);d.src=d.dataset[b]||d.getAttribute("data-"+b)}}};a.prototype={init:function(){f.push(this.elem)},
render:function(){k()},listen:function(){c||(l.addEventListener("scroll",k),h.documentElement.classList.add("is-binded-echo"))}};var d=h.getElementsByClassName(e)||"";d&&function(){for(var b=0;b<d.length;b++)(new a(d[b])).init()}()}})("undefined"!==typeof window?window:this,document);
(function(l,h){l.loadJsCss=function(e,b){var a=this;a.files=e;a.js=[];a.head=h.getElementsByTagName("head")[0]||"";a.body=h.body||"";a.ref=h.getElementsByTagName("script")[0]||"";a.callback=b||function(){};a.loadStyle=function(b){var c=h.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=b;a.head.appendChild(c)};a.loadScript=function(b){var c=h.createElement("script");c.type="text/javascript";c.async=!0;c.src=a.js[b];c.onload=function(){++b<a.js.length?a.loadScript(b):a.callback()};
a.head.appendChild(c);a.ref.parentNode?a.ref.parentNode.insertBefore(c,a.ref):(a.body||a.head).appendChild(c)};var c,f;c=0;for(f=a.files.length;c<f;c+=1)/\.js$|\.js\?/.test(a.files[c])&&a.js.push(a.files[c]),/\.css$|\.css\?|\/css\?/.test(a.files[c])&&a.loadStyle(a.files[c]);c=f=null;0<a.js.length?a.loadScript(0):a.callback()}})("undefined"!==typeof window?window:this,document);
(function(l,h){var e=["./libs/picturewall/css/bundle.min.css"];l.Promise||e.push("//cdn.jsdelivr.net/es6-promise-polyfill/1.2.0/promise.min.js");l.fetch||e.push("//cdn.jsdelivr.net/fetch/2.0.1/fetch.min.js");new loadJsCss(e,function(){var b=h.getElementById("zoomwall")||"",a=new Headers;fetch("./libs/picturewall/json/zoomwall.json",{headers:a,credentials:"same-origin"}).then(function(a){if(a.ok)return a.text();throw Error("cannot fetch","./libs/picturewall/json/zoomwall.json");}).then(function(a){(new Promise(function(f,
e){var d;try{d=JSON.parse(a);if(!d[0].highres)throw Error("incomplete JSON data: no highres");if(!d[0].src)throw Error("incomplete JSON data: no src");}catch(l){console.log("cannot init generateGallery",l);return}var p=h.createDocumentFragment(),m;for(m in d)if(d.hasOwnProperty(m)&&d[m].src&&d[m].highres){var g=h.createElement("img");/^([0-9]+)(\x|\ )([0-9]+)$/.test(d[m].src)?g.src=["data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20viewBox%3D%270%200%20",
d[m].src.replace("x","%20"),"%27%2F%3E"].join(""):g.src=d[m].src;g.dataset.highres=d[m].highres;g.classList.add("data-src-img");p.appendChild(g);p.appendChild(h.createTextNode("\n"))}b.appendChild(p)?f():e()})).then(function(a){return a}).then(function(a){var c=setTimeout(function(){clearTimeout(c);c=null;b&&zoomwall.create(b,!0,"highres")},200)}).then(function(a){var b=setTimeout(function(){clearTimeout(b);b=null;echo("data-src-img","highres")},200)})["catch"](function(a){console.log("Cannot create zoomwall gallery",
a)})})["catch"](function(a){console.log("cannot parse","./libs/picturewall/json/zoomwall.json")})})})("undefined"!==typeof window?window:this,document);
//# sourceMappingURL=bundle.min.js.map
