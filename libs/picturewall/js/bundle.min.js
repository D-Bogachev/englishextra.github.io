(function(k){k.console||(k.console={});k=k.console;for(var e,f=function(){},b=["memory"],a="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");e=b.pop();)k[e]||(k[e]={});for(;e=a.pop();)k[e]||(k[e]=f);e=e=f=b=a=null})("undefined"!==typeof window?window:this);
(function(k,e,f){var b=function(){var a=function(){function b(a,h){this.progress=0;this.options={id:"top-progress-bar",color:"#F44336",height:"2px",duration:.2};if(a&&"object"===typeof a)for(var c in a)a.hasOwnProperty(c)&&(this.options[c]=a[c]);this.options.opacityDuration=3*this.options.duration;this.progressBar=e.createElement("div");this.progressBar.id=this.options.id;this.progressBar.setCSS=function(a){for(var b in a)a.hasOwnProperty(b)&&(this.style[b]=a[b])};this.progressBar.setCSS({position:h?
"relative":"fixed",top:"0",left:"0",right:"0","background-color":this.options.color,height:this.options.height,width:"0%",transition:"width "+this.options.duration+"s, opacity "+this.options.opacityDuration+"s","-moz-transition":"width "+this.options.duration+"s, opacity "+this.options.opacityDuration+"s","-webkit-transition":"width "+this.options.duration+"s, opacity "+this.options.opacityDuration+"s"});if(h){var d;-1!==h.indexOf("#",0)?d=e.getElementById(h)||"":-1!==h.indexOf(".",0)&&(d=e.getElementsByClassName(h)[0]||
"");d&&(d.hasChildNodes()?d.insertBefore(this.progressBar,d.firstChild):d.appendChild(this.progressBar))}else e.body.appendChild(this.progressBar)}var d=function(){var a,b=e.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(c.hasOwnProperty(a)&&b.style[a]!==f)return c[a]}();b.prototype.transit=function(){this.progressBar.style.width=this.progress+"%"};b.prototype.getProgress=function(){return this.progress};
b.prototype.setProgress=function(a,b){this.show();this.progress=100<a?100:0>a?0:a;this.transit();b&&b()};b.prototype.increase=function(a,b){this.show();this.setProgress(this.progress+a,b)};b.prototype.decrease=function(a,b){this.show();this.setProgress(this.progress-a,b)};b.prototype.finish=function(b){var c=this;this.setProgress(100,b);this.hide();d&&this.progressBar.addEventListener(d,function(b){c.reset();c.progressBar.removeEventListener(b.type,a)})};b.prototype.reset=function(a){this.progress=
0;this.transit();a&&a()};b.prototype.hide=function(){this.progressBar.style.opacity="0"};b.prototype.show=function(){this.progressBar.style.opacity="1"};return b};return a()}();k.ToProgress=b})("undefined"!==typeof window?window:this,document);
(function(k,e){var f={create:function(b,a,c,d,g){var h=this;h.dataAttributeHighresName=c||"highres";h.dataAttributeLowresName=d||"lowres";f.resize(b.children);b.classList.remove("loading");b.addEventListener("click",function(){h.children&&0<h.children.length&&f.shrink(h.children[0])});for(c=0;c<b.children.length;c++)b.children[c].addEventListener("click",f.animate);a&&f.keys(b);"function"===typeof g&&g(b)},keys:function(b){var a=function(a){if(!a.defaultPrevented){var d=b||e.getElementsByClassName("zoomwall lightbox")[0];
if(d)switch(a.keyCode){case 27:d.children&&0<d.children.length&&f.shrink(d.children[0]);a.preventDefault();break;case 37:f.page(d,!1);a.preventDefault();break;case 39:f.page(d,!0),a.preventDefault()}}};e.addEventListener("keydown",a);return a},resizeRow:function(b,a){if(b&&1<b.length)for(var c in b)b.hasOwnProperty(c)&&(b[c].style.width=parseInt(k.getComputedStyle(b[c]).width,10)/a*100+"%",b[c].style.height="auto")},calcRowWidth:function(b){var a=0,c;for(c in b)b.hasOwnProperty(c)&&(a+=parseInt(k.getComputedStyle(b[c]).width,
10));return a},resize:function(b){for(var a=[],c=-1,d=0;d<b.length;d++){var g=b[d];g&&(-1==c?c=g.offsetTop:g.offsetTop!=c&&(f.resizeRow(a,f.calcRowWidth(a)),a=[],c=g.offsetTop),a.push(g))}f.resizeRow(a,f.calcRowWidth(a))},reset:function(b){b.style.transform="translate(0, 0) scale(1)";b.style.webkitTransform="translate(0, 0) scale(1)";b.classList.remove("active")},shrink:function(b){b.parentNode.classList.remove("lightbox");f.reset(b);for(var a=b.previousElementSibling;a;)f.reset(a),a=a.previousElementSibling;
for(a=b.nextElementSibling;a;)f.reset(a),a=a.nextElementSibling;b.dataset.lowres&&(b.src=b.dataset.lowres)},expand:function(b){b.classList.add("active");b.parentNode.classList.add("lightbox");var a=k.getComputedStyle(b.parentNode),c=parseInt(a.width,10),d=parseInt(a.height,10),g=b.parentNode.getBoundingClientRect().top,a=k.getComputedStyle(b),h=parseInt(a.width,10),e=parseInt(a.height,10),f=k.innerHeight;d<k.innerHeight?f=d:0<g&&(f-=g);b.dataset[this.dataAttributeHighresName]&&(b.src!=b.dataset[this.dataAttributeHighresName]&&
void 0===b.dataset[this.dataAttributeLowresName]&&(b.dataset[this.dataAttributeLowresName]=b.src),b.src=b.dataset[this.dataAttributeHighresName]);var l=[];l.push(b);for(a=b.nextElementSibling;a&&a.offsetTop==b.offsetTop;)l.push(a),a=a.nextElementSibling;for(a=b.previousElementSibling;a&&a.offsetTop==b.offsetTop;)l.unshift(a),a=a.previousElementSibling;a=f/e;h*a>c&&(a=c/h);var p=g-b.parentNode.offsetTop+b.offsetTop;if(d<k.innerHeight||e*a<d)p-=f/2-e*a/2;0<g&&(p-=g);for(d=g=0;d<l.length&&l[d]!=b;d++)g+=
parseInt(k.getComputedStyle(l[d]).width,10)*a;g=c/2-h*a/2-g;d=0;for(f=l.length-1;0<=f&&l[f]!=b;f--)d+=parseInt(k.getComputedStyle(l[f]).width,10)*a;d=c/2-h*a/2-d;for(h=c=b=0;h<l.length;h++){b+=c*a-c;var c=parseInt(k.getComputedStyle(l[h]).width,10),f=(b+g)/c*100,m=-p/parseInt(k.getComputedStyle(l[h]).height,10)*100;l[h].style.transformOrigin="0% 0%";l[h].style.webkitTransformOrigin="0% 0%";l[h].style.transform="translate("+f.toFixed(8)+"%, "+m.toFixed(8)+"%) scale("+a.toFixed(8)+")";l[h].style.webkitTransform=
"translate("+f.toFixed(8)+"%, "+m.toFixed(8)+"%) scale("+a.toFixed(8)+")"}for(var e=e*(a-1)-p,n,c=b=0,h=l[l.length-1].nextElementSibling,f=-1;h;){m=h.offsetTop;m==f?b+=c*a-c:(-1!=f&&(b=0,e+=n*(a-1)),f=m);c=parseInt(k.getComputedStyle(h).width,10);n=parseInt(k.getComputedStyle(h).height,10);var m=(b+g)/c*100,r=e/n*100;h.style.transformOrigin="0% 0%";h.style.webkitTransformOrigin="0% 0%";h.style.transform="translate("+m.toFixed(8)+"%, "+r.toFixed(8)+"%) scale("+a.toFixed(8)+")";h.style.webkitTransform=
"translate("+m.toFixed(8)+"%, "+r.toFixed(8)+"%) scale("+a.toFixed(8)+")";h=h.nextElementSibling}n=-p;c=b=0;l=l[0].previousElementSibling;for(p=-1;l;)g=l.offsetTop,g==p?b-=c*a-c:(b=0,n-=parseInt(k.getComputedStyle(l).height,10)*(a-1),p=g),c=parseInt(k.getComputedStyle(l).width,10),g=(b-d)/c*100,e=n/parseInt(k.getComputedStyle(l).height,10)*100,l.style.transformOrigin="100% 0%",l.style.webkitTransformOrigin="100% 0%",l.style.transform="translate("+g.toFixed(8)+"%, "+e.toFixed(8)+"%) scale("+a.toFixed(8)+
")",l.style.webkitTransform="translate("+g.toFixed(8)+"%, "+e.toFixed(8)+"%) scale("+a.toFixed(8)+")",l=l.previousElementSibling},animate:function(b){if(this.classList.contains("active"))f.shrink(this);else{for(var a=this.parentNode.getElementsByClassName("active"),c=0;c<a.length;c++)a[c].classList.remove("active");f.expand(this)}b.stopPropagation()},page:function(b,a){var c=b.getElementsByClassName("active");if(c&&0<c.length){var c=c[0],e;if(e=a?c.nextElementSibling:c.previousElementSibling)c.classList.remove("active"),
c.dataset.lowres&&(c.src=c.dataset.lowres),f.expand(e)}}};k.zoomwall=f})("undefined"!==typeof window?window:this,document);
(function(k){function e(a,b){for(var c=b.split(".");c.length;){if(!(c[0]in a))return!1;a=a[c.shift()]}return a}function f(c,g){return c.replace(b,function(a,b,c,d,k,m,n,r){d=e(g,d);var v="",u;if(!d)return"!"===c?f(k,g):n?f(r,g):"";if(!c)return f(m,g);if("@"===c){a=g._key;b=g._val;for(u in d)d.hasOwnProperty(u)&&(g._key=u,g._val=d[u],v+=f(k,g));g._key=a;g._val=b;return v}}).replace(a,function(a,b,c){return(a=e(g,c))||0===a?"%"===b?(new Option(a)).text.replace(/"/g,"&quot;"):a:""})}var b=/\{\{(([@!]?)(.+?))\}\}(([\s\S]+?)(\{\{:\1\}\}([\s\S]+?))?)\{\{\/\1\}\}/g,
a=/\{\{([=%])(.+?)\}\}/g,c=function(a){this.t=a};c.prototype.render=function(a){return f(this.t,a)};k.t=c})("undefined"!==typeof window?window:this);
(function(k,e){k.echo=function(f,b,a){f=f||"data-src-img";b=b||"src";a=a||100;var c=function(a){this.elem=a;this.render();this.listen()},d=e.documentElement.classList.contains("is-binded-echo")||"",g=[],h=function(){for(var a=0;a<g.length;a++){var c=g[a],h=c.getBoundingClientRect();if((0<=h.top&&0<=h.left&&h.top)<=(k.innerHeight||e.documentElement.clientHeight)){var h=c,d=a;-1!==g.indexOf(c)&&g.splice(d,1);h.src=h.dataset[b]||h.getAttribute("data-"+b)}}},C=function(a,b){function c(){f=0;g=+new Date;
d=a.apply(h,e);e=h=null}var h,e,d,f,g=0;return function(){h=this;e=arguments;var a=new Date-g;f||(a>=b?c():f=setTimeout(c,b-a));return d}}(h,a),D=function(){var a=!1;try{var b=Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){a=!0}});k.addEventListener("test",function(){},b)}catch(c){}return a}();c.prototype={init:function(){g.push(this.elem)},render:function(){h()},listen:function(){d||(k.addEventListener("scroll",C,D?{passive:!0}:!1),e.documentElement.classList.add("is-binded-echo"))}};
var l=e.getElementsByClassName(f)||"";l&&function(){for(var a=0;a<l.length;a++)(new c(l[a])).init()}()}})("undefined"!==typeof window?window:this,document);(function(k,e){k.doesFontExist=function(f){var b=e.createElement("canvas").getContext("2d");b.font="72px monospace";var a=b.measureText("abcdefghijklmnopqrstuvwxyz0123456789").width;b.font="72px '"+f+"', monospace";return b.measureText("abcdefghijklmnopqrstuvwxyz0123456789").width==a?!1:!0}})("undefined"!==typeof window?window:this,document);
(function(k,e){k.loadJsCss=function(f,b){var a=this;a.files=f;a.js=[];a.head=e.getElementsByTagName("head")[0]||"";a.body=e.body||"";a.ref=e.getElementsByTagName("script")[0]||"";a.callback=b||function(){};a.loadStyle=function(b){var c=e.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=b;a.head.appendChild(c)};a.loadScript=function(b){var c=e.createElement("script");c.type="text/javascript";c.async=!0;c.src=a.js[b];c.onload=function(){++b<a.js.length?a.loadScript(b):a.callback()};
a.head.appendChild(c);a.ref.parentNode?a.ref.parentNode.insertBefore(c,a.ref):(a.body||a.head).appendChild(c)};var c,d;c=0;for(d=a.files.length;c<d;c+=1)/\.js$|\.js\?/.test(a.files[c])&&a.js.push(a.files[c]),/\.css$|\.css\?|\/css\?/.test(a.files[c])&&a.loadStyle(a.files[c]);c=d=null;0<a.js.length?a.loadScript(0):a.callback()}})("undefined"!==typeof window?window:this,document);
(function(k,e){var f=new ToProgress({id:"top-progress-bar",color:"#FF2C40",height:"0.200rem",duration:.2});f.increase(20);var b="ontouchstart"in e.documentElement||"",a="onwheel"in e.createElement("div")||void 0!==e.onmousewheel||"",c=function(){f.increase(20);var a="ontouchstart"in e.documentElement||"",b="onwheel"in e.createElement("div")||void 0!==e.onmousewheel||"",c=e.title||"",d=navigator.userAgent||"",g=function(){var a=new Date,b=a.getDate(),c=a.getFullYear(),a=a.getMonth(),a=a+1;10>b&&(b=
"0"+b);10>a&&(a="0"+a);return c+"-"+a+"-"+b}(),m="";d&&k.platform&&(m=platform.description||"",e.title=c+" ["+(g?" "+g:"")+(m?" "+m:"")+(a||b?" with":"")+(a?" touch":"")+(a&&b?",":"")+(b?" mousewheel":"")+"]");var n=e.getElementsByClassName("zoomwall")[0]||"",r=function(a,b,c){b=e.getElementById(b)||"";c=e.getElementById(c)||"";return(a=-1!==["boolean","number","string","symbol","function"].indexOf(typeof a)?JSON.parse(a):a)&&b&&c?(new t(b.innerHTML||"")).render(a):{}},v=function(a,b,c){var d=e.body||
"",f=function(){return c&&"function"===typeof c&&c()};try{var h=b.cloneNode(!1);if(e.createRange){var g=e.createRange();g.selectNode(d);var k=g.createContextualFragment(a);h.appendChild(k);return b.parentNode?b.parentNode.replaceChild(h,b):b.innerHTML=a,f()}h.innerHTML=a;return b.parentNode?b.parentNode.replaceChild(e.createDocumentFragment.appendChild(h),b):b.innerHTML=a,f()}catch(l){console.log(l)}},u=function(a,b,c,d,f){f=f||"";var h=e.getElementById(b)||"",g=e.getElementById(c)||"",k=function(){return d&&
"function"===typeof d&&d()};a&&h&&g&&(a=r(a,b,c),f?(g.innerHTML=a,k()):v(a,g,k))},E=function(a){return new Promise(function(b,c){var d;try{if(d=JSON.parse(a),d.pages[0].src)if(d.pages[0].width){if(!d.pages[0].height)throw Error("incomplete JSON data: no height");if(!d.pages[0].title)throw Error("incomplete JSON data: no title");}else throw Error("incomplete JSON data: no width");else throw Error("incomplete JSON data: no src");}catch(f){console.log("cannot init generateGallery",f);return}var h=function(a){var b=
0,c;for(c in a)a.hasOwnProperty(c)&&++b;return b}(d.pages);u(d,"template_zoomwall","target_zoomwall",function(){h===e.getElementsByClassName("data-src-img").length?b():c()},!0)})},w,F=function(){clearTimeout(w);w=null;zoomwall.create(n,!0,"src",null,function(){n.style.visibility="visible";n.style.opacity=1})},x,G=function(){clearTimeout(x);x=null;echo("data-src-img","src")},c=new Headers;fetch("./libs/contents-cards/json/contents.json",{headers:c,credentials:"same-origin"}).then(function(a){if(a.ok)return a.text();
throw Error("cannot fetch","./libs/contents-cards/json/contents.json");}).then(function(a){E(a).then(function(a){return a}).then(function(a){w=setTimeout(F,200)}).then(function(a){x=setTimeout(G,200)})["catch"](function(a){console.log("Cannot create zoomwall gallery",a)})})["catch"](function(a){console.log("cannot parse","./libs/contents-cards/json/contents.json")});var y=function(a,b){function c(){h=0;g=+new Date;f=a.apply(d,e);e=d=null}var d,e,f,h,g=0;return function(){d=this;e=arguments;var a=
new Date-g;h||(a>=b?c():h=setTimeout(c,b-a));return f}},q=e.getElementsByClassName("title-bar")[0]||"",z=q.offsetHeight||0,c=e.getElementsByClassName("wrapper")[0]||"",A=function(){y(function(){(e.body.scrollTop||e.documentElement.scrollTop||0)>z?q.classList.add("is-hidden"):(q.classList.remove("is-fixed"),q.classList.remove("is-hidden"))},100)()},B=function(){y(function(){q.classList.remove("is-hidden");(e.body.scrollTop||e.documentElement.scrollTop||0)>z?q.classList.add("is-fixed"):q.classList.remove("is-fixed")},
100)()};c&&q&&(a?k.tocca&&(k.addEventListener("swipeup",A,{passive:!0}),k.addEventListener("swipedown",B,{passive:!0})):b&&k.WheelIndicator&&new WheelIndicator({elem:c,callback:function(a){"down"===a.direction&&A();"up"===a.direction&&B()},preventMouse:!1}));f.finish();f.hide()},d=["./libs/picturewall/css/bundle.min.css"],g=function(a){var b=k.location.protocol||"";return"http:"===b?"http":"https:"===b?"https":a?"http":""}(!0);"classList"in e.createElement("_")||d.push(g+"://cdn.jsdelivr.net/npm/classlist.js@1.1.20150312/classList.min.js");
"undefined"!==typeof k.Element&&"dataset"in e.documentElement||d.push(g+"://cdn.jsdelivr.net/npm/element-dataset@2.2.6/lib/browser/index.cjs.min.js");(function(){var a=!1;try{var b=Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){a=!0}});k[addEventListener]("test",function(){},b)}catch(c){}return a})()||d.push(g+"://cdn.jsdelivr.net/npm/dom4@1.8.5/build/dom4.max.min.js");k.Promise||d.push(g+"://cdn.jsdelivr.net/es6-promise-polyfill/1.2.0/promise.min.js");k.fetch||d.push(g+
"://cdn.jsdelivr.net/fetch/2.0.1/fetch.min.js");d.push(g+"://cdn.jsdelivr.net/npm/platform@1.3.4/platform.min.js");b?d.push(g+"://cdnjs.cloudflare.com/ajax/libs/Tocca.js/2.0.1/Tocca.min.js"):a&&d.push("./cdn/wheel-indicator/1.1.4/js/wheel-indicator.fixed.min.js");new loadJsCss([g+"://fonts.googleapis.com/css?family=Roboto:400&subset=cyrillic"],function(){var a,b=function(){clearInterval(a);a=null;f.increase(20);new loadJsCss(d,c)},g=function(){doesFontExist("Roboto")&&b()};(function(){var a=e.createElement("canvas");
return!(!a.getContext||!a.getContext("2d"))})()?a=setInterval(g,100):(a=null,b())})})("undefined"!==typeof window?window:this,document);
//# sourceMappingURL=bundle.min.js.map
